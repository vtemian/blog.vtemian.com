# llms.txt Implementation Plan

**Goal:** Auto-generate `/llms.txt` at Hugo build time for LLM discovery of blog content.

**Architecture:** Hugo custom output format that renders a text file from a dedicated template. The template iterates all posts and outputs structured metadata following the llms.txt spec.

**Design:** [thoughts/shared/designs/2025-12-23-llms-txt-design.md](../designs/2025-12-23-llms-txt-design.md)

---

## Task 1: Add Custom Output Format to Hugo Config

**Files:**
- Modify: `config.toml`

**Step 1: Add output format and home outputs configuration**

Open `config.toml` and add the following at the end of the file:

```toml
[outputFormats]
  [outputFormats.llmstxt]
    name = "llmstxt"
    mediaType = "text/plain"
    baseName = "llms"
    isPlainText = true
    notAlternative = true

[outputs]
  home = ["HTML", "RSS", "llmstxt"]
```

This defines:
- A custom output format named `llmstxt` that produces plain text
- `baseName = "llms"` ensures the file is named `llms.txt` (not `index.txt`)
- `isPlainText = true` prevents HTML escaping in the template
- `notAlternative = true` prevents it from appearing in `<link rel="alternate">` tags
- Home page outputs now include HTML, RSS, and our new llmstxt format

**Step 2: Verify config syntax**

Run: `hugo config`

Expected: No errors. Output should include the new `llmstxt` output format.

**Step 3: Commit config changes**

```bash
git add config.toml
git commit -m "feat(llms): add llmstxt custom output format to Hugo config"
```

---

## Task 2: Create the llms.txt Template

**Files:**
- Create: `layouts/index.llmstxt`

**Step 1: Create the template file**

Create `layouts/index.llmstxt` with the following content:

```
# {{ .Site.Params.author }}'s Blog

> {{ .Site.Params.description }}

## Posts
{{ range where (.Site.RegularPages.ByDate.Reverse) "Section" "post" }}
- [{{ .Title }}]({{ .Permalink }}){{ with .Description }}: {{ . }}{{ end }}
{{- end }}
```

Template explanation:
- `# {{ .Site.Params.author }}'s Blog` - Header with author name from config.toml (`Vlad Temian`)
- `> {{ .Site.Params.description }}` - Site description as blockquote
- `{{ range where (.Site.RegularPages.ByDate.Reverse) "Section" "post" }}` - Iterate all posts in reverse chronological order (same pattern as `list.html`)
- `{{ .Title }}` - Post title from frontmatter
- `{{ .Permalink }}` - Full URL (e.g., `https://blog.vtemian.com/post/slug/`)
- `{{ with .Description }}: {{ . }}{{ end }}` - Only output description if it exists and is non-empty
- `{{- end }}` - The `-` trims whitespace to avoid extra blank lines

**Step 2: Commit template**

```bash
git add layouts/index.llmstxt
git commit -m "feat(llms): add llms.txt template for LLM discovery"
```

---

## Task 3: Build and Verify Output

**Files:**
- Verify: `public/llms.txt`

**Step 1: Run production build**

Run: `yarn build`

Expected: Build completes successfully without errors.

**Step 2: Verify file exists**

Run: `ls -la public/llms.txt`

Expected: File exists with non-zero size.

**Step 3: Verify file content structure**

Run: `cat public/llms.txt`

Expected output format:
```
# Vlad Temian's Blog

> I build systems. Over 15 years helping startups scale production infrastructure. Former CTO of qed.builders (acquired by The Sandbox). Long-time open-source contributor with a systems caretaker mindset.

## Posts

- [Technical Debt is Cheap](https://blog.vtemian.com/post/technical-debt-is-cheap/): How I refactored years of technical debt in 3 hours using Claude Code - a practitioner's reality check on AI hype vs actual results
- [Parallel Transaction Execution in Blockchains](https://blog.vtemian.com/post/parallel-transaction-execution-in-blockchains/): This article explores parallel transaction execution in blockchain systems...
- [Healthy Python Codebase](https://blog.vtemian.com/post/healthy-python-codebase/): Healthy Python Codebase
- [Building a serverless hosting platform](https://blog.vtemian.com/post/serverless-hosting-platform/)
- [Python Multiple Inheritance](https://blog.vtemian.com/post/multiple-inheritance/): How multiple inheritance works in Python?
- [Interviews](https://blog.vtemian.com/post/interviews/): A short interviewing statement for 2019
- [2019](https://blog.vtemian.com/post/2019/): 2019 - the beging
```

**Step 4: Verify specific requirements**

1. **Header present**: First line starts with `# Vlad Temian's Blog`
2. **Description present**: Second non-empty line starts with `>`
3. **Posts section**: Contains `## Posts`
4. **Reverse chronological order**: Most recent post (Technical Debt is Cheap, 2025-10-27) appears first
5. **Posts without descriptions handled**: "Building a serverless hosting platform" has no description after the URL (no trailing colon)
6. **Full URLs**: All links use `https://blog.vtemian.com/` prefix

**Step 5: Test with development server**

Run: `yarn dev`

Then in another terminal:

Run: `curl http://localhost:1313/llms.txt`

Expected: Same content as production build.

---

## Task 4: Final Commit

**Step 1: Ensure all changes are committed**

Run: `git status`

Expected: Working tree clean (all changes already committed in previous tasks).

If there are uncommitted changes:

```bash
git add -A
git commit -m "feat(llms): complete llms.txt implementation for LLM discovery"
```

---

## Summary

| Task | File | Action |
|------|------|--------|
| 1 | `config.toml` | Add output format config |
| 2 | `layouts/index.llmstxt` | Create template |
| 3 | `public/llms.txt` | Verify output |
| 4 | - | Final commit |

**Total estimated time:** 10-15 minutes

**Post-implementation:** After deployment, verify `https://blog.vtemian.com/llms.txt` returns the expected content.
