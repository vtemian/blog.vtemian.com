{{ define "content" }}
{{- $readingTime := math.Round (div .WordCount 200.0) }}
{{- if lt $readingTime 1 }}{{ $readingTime = 1 }}{{ end }}

<div class="container">
    <main class="article">
        <article>
            <header>
                <a href="/">&larr; Go back</a>
                <h1>{{ .Title }}</h1>

                <p class="article-date">{{ .Date.Format "02 Jan 2006" }} Â· {{ $readingTime }} min read</p>
            </header>
            <p>
                {{ .Content }}
            </p>
        </article>
    </main>
    {{ partial "footer" .}}
</div>

<script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: false, theme: 'neutral' });
    // Convert Hugo's ```mermaid fenced blocks into mermaid-renderable elements
    document.querySelectorAll('code.language-mermaid').forEach(el => {
        const pre = el.parentElement;
        const div = document.createElement('pre');
        div.className = 'mermaid';
        div.textContent = el.textContent;
        pre.parentElement.replaceChild(div, pre);
    });
    await mermaid.run();
</script>

{{ end }}
